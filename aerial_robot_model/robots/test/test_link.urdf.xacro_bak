<?xml version="1.0"?>
<robot
    xmlns:xacro="http://www.ros.org/wiki/xacro" name="test_link" >

  <xacro:macro name="test_link" > 

    <link name="abdomen">
      <visual>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <geometry>
          <mesh filename="package://aerial_robot_model/urdf/mesh_model/propeller_link_new1.stl" scale=".001 .001 .001"/>
        </geometry>
        <xacro:link_color />
      </visual>
    </link>

    <link name="abdomen2">
      <visual>
        <origin rpy="0 0 0" xyz="0 -${abdomen_z_offset} 0"/>
        <geometry>
          <mesh filename="package://aerial_robot_model/urdf/mesh_model/propeller_link_new2.stl" scale=".001 .001 .001"/>
        </geometry>
        <xacro:link_color />
      </visual>
    </link>

    <joint name="tiltrotor_pitch_joint" type="continuous"> 
      <parent link="abdomen2"/>
      <child link="abdomen"/>
      <origin rpy="0 0 0" xyz="0 -${abdomen_z_offset} 0"/> 
      <axis xyz="0 0 1"/>
    </joint>

    <link name="abdomen3">
      <visual>
        <origin rpy="1.5708 0  0"
                xyz="${-abdomen_radius + abdomen_x_offset} 0 ${-abdomen_z_offset}"/> 
        <geometry>
          <mesh filename="package://aerial_robot_model/urdf/mesh_model/propeller_link_new3.stl" scale=".001 .001 .001"/>
        </geometry>
        <xacro:link_color />
      </visual>
    </link>

    <joint name="tiltrotor_roll_joint" type="continuous"> 
      <child link="abdomen2"/>
      <parent link="abdomen3"/>
      <origin rpy="1.5708 0 0" xyz="${-abdomen_radius + abdomen_x_offset} 0 0"/> 
      <axis xyz="1 0 0"/>
    </joint>


  </xacro:macro>


</robot>

